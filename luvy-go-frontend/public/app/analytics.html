<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analytics | LUVY</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg-primary:#0f1419;--bg-secondary:#1a1f2e;--bg-tertiary:#252b3b;
  --text-primary:#ffffff;--text-secondary:#b4bcd0;--text-tertiary:#8b93a7;
  --accent-purple:#8b5cf6;--accent-blue:#3b82f6;--accent-green:#10b981;--accent-red:#ef4444;
  --border:#2d3748;--border-hover:#4a5568;
  --radius:8px;--radius-lg:12px;
}
body{font-family:'Inter',-apple-system,sans-serif;background:var(--bg-primary);color:var(--text-primary);-webkit-font-smoothing:antialiased}

/* Header - Same as other pages */
header{background:var(--bg-secondary);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}
.header-inner{max-width:1920px;margin:0 auto;padding:0 24px;height:60px;display:flex;align-items:center;justify-content:space-between}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none}
.logo-mark{width:32px;height:32px;border-radius:var(--radius);background:linear-gradient(135deg,var(--accent-purple),var(--accent-blue));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:16px}
.logo-text{font-size:16px;font-weight:700;color:var(--text-primary)}
.nav{display:flex;gap:4px}
.nav-link{color:var(--text-secondary);text-decoration:none;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;transition:.15s}
.nav-link:hover{color:var(--text-primary);background:var(--bg-tertiary)}
.nav-link.active{color:var(--text-primary);background:var(--bg-tertiary)}
.header-right{display:flex;align-items:center;gap:16px}
.balance-badge{display:flex;align-items:center;gap:6px;background:var(--bg-tertiary);color:var(--text-primary);padding:8px 14px;border-radius:var(--radius);font-size:14px;font-weight:600;border:1px solid var(--border)}
.avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--accent-purple),var(--accent-blue));display:flex;align-items:center;justify-content:center;color:#fff;font-size:13px;font-weight:600;cursor:pointer}

main{max-width:1600px;margin:0 auto;padding:32px 24px}

/* Page Header */
.page-header{margin-bottom:32px}
.page-title{font-size:32px;font-weight:700;margin-bottom:8px}
.page-subtitle{font-size:14px;color:var(--text-secondary)}

/* Insights Grid */
.insights-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:32px}
.insight-card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius-lg);padding:24px}
.insight-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.insight-icon{width:48px;height:48px;border-radius:var(--radius);display:flex;align-items:center;justify-content:center;font-size:24px;background:var(--bg-tertiary)}
.insight-trend{font-size:12px;font-weight:600;color:var(--accent-green)}
.insight-value{font-size:36px;font-weight:700;margin-bottom:4px}
.insight-label{font-size:13px;color:var(--text-secondary);margin-bottom:16px}
.insight-detail{font-size:12px;color:var(--text-tertiary);line-height:1.6}

/* Charts Grid */
.charts-grid{display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:32px}
.chart-card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius-lg);padding:24px}
.chart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}
.chart-title{font-size:16px;font-weight:700}
.chart-subtitle{font-size:12px;color:var(--text-tertiary)}
.chart-container{height:300px;position:relative}

/* Category Breakdown */
.category-list{display:flex;flex-direction:column;gap:16px}
.category-item{display:flex;align-items:center;gap:12px}
.category-icon{width:40px;height:40px;border-radius:var(--radius);background:var(--bg-tertiary);display:flex;align-items:center;justify-content:center;font-size:20px}
.category-info{flex:1}
.category-name{font-size:14px;font-weight:600;margin-bottom:4px}
.category-bar{height:6px;background:var(--bg-tertiary);border-radius:99px;overflow:hidden;margin-bottom:4px}
.category-bar-fill{height:100%;border-radius:99px}
.category-amount{font-size:12px;color:var(--text-tertiary)}
.category-value{font-size:14px;font-weight:700;color:var(--accent-purple)}

/* Spending Analysis */
.analysis-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.analysis-card{background:var(--bg-secondary);border:1px solid var(--border);border-radius:var(--radius-lg);padding:24px}
.analysis-item{display:flex;justify-content:space-between;align-items:center;padding:16px 0;border-bottom:1px solid var(--border)}
.analysis-item:last-child{border-bottom:none}
.analysis-label{font-size:14px;color:var(--text-secondary)}
.analysis-value{font-size:16px;font-weight:700}

@media(max-width:1200px){.insights-grid,.charts-grid,.analysis-grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<header>
  <div class="header-inner">
    <a href="dashboard.html" class="logo">
      <div class="logo-mark">L</div>
      <span class="logo-text">LUVY</span>
    </a>
    <nav class="nav">
      <a href="dashboard.html" class="nav-link">Dashboard</a>
      <a href="transactions.html" class="nav-link">Transactions</a>
      <a href="upload-receipt.html" class="nav-link">Upload</a>
      <a href="analytics.html" class="nav-link active">Analytics</a>
      <a href="settings.html" class="nav-link">Settings</a>
    </nav>
    <div class="header-right">
      <div class="balance-badge">ðŸ’Ž <span id="navBalance">124.70</span> LUVY</div>
      <div class="avatar" id="navAvatar" onclick="handleLogout()">B</div>
    </div>
  </div>
</header>

<main>
  <div class="page-header">
    <h1 class="page-title">Analytics</h1>
    <p class="page-subtitle">Deep insights into your spending patterns</p>
  </div>

  <!-- Key Insights -->
  <div class="insights-grid">
    <div class="insight-card">
      <div class="insight-header">
        <div class="insight-icon">ðŸ“Š</div>
        <div class="insight-trend">â†‘ 12%</div>
      </div>
      <div class="insight-value">â‚¬842</div>
      <div class="insight-label">Monthly Spending</div>
      <div class="insight-detail">You spent â‚¬92 more than last month. Your highest spending category is Grocery at â‚¬420.</div>
    </div>
    <div class="insight-card">
      <div class="insight-header">
        <div class="insight-icon">ðŸŽ¯</div>
        <div class="insight-trend">â†‘ 8%</div>
      </div>
      <div class="insight-value">â‚¬28.50</div>
      <div class="insight-label">Avg. Transaction</div>
      <div class="insight-detail">Your average receipt value increased by â‚¬2.10. Most receipts are from REWE and Lidl.</div>
    </div>
    <div class="insight-card">
      <div class="insight-header">
        <div class="insight-icon">ðŸ’¡</div>
        <div class="insight-trend">â†’ 0%</div>
      </div>
      <div class="insight-value">3.2x</div>
      <div class="insight-label">Weekly Activity</div>
      <div class="insight-detail">You upload receipts 3.2 times per week on average. Peak day is Saturday.</div>
    </div>
  </div>

  <!-- Charts -->
  <div class="charts-grid">
    <!-- Spending Over Time -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Spending Over Time</div>
          <div class="chart-subtitle">Last 6 months</div>
        </div>
      </div>
      <div class="chart-container">
        <canvas id="spendingChart"></canvas>
      </div>
    </div>

    <!-- Category Breakdown -->
    <div class="chart-card">
      <div class="chart-header">
        <div>
          <div class="chart-title">Category Breakdown</div>
          <div class="chart-subtitle">This month</div>
        </div>
      </div>
      <div class="category-list">
        <div class="category-item">
          <div class="category-icon">ðŸ›’</div>
          <div class="category-info">
            <div class="category-name">Grocery</div>
            <div class="category-bar">
              <div class="category-bar-fill" style="width:70%;background:var(--accent-purple)"></div>
            </div>
            <div class="category-amount">18 receipts â€¢ 70%</div>
          </div>
          <div class="category-value">â‚¬420</div>
        </div>
        <div class="category-item">
          <div class="category-icon">â›½</div>
          <div class="category-info">
            <div class="category-name">Gas Station</div>
            <div class="category-bar">
              <div class="category-bar-fill" style="width:15%;background:var(--accent-blue)"></div>
            </div>
            <div class="category-amount">3 receipts â€¢ 15%</div>
          </div>
          <div class="category-value">â‚¬90</div>
        </div>
        <div class="category-item">
          <div class="category-icon">ðŸ“±</div>
          <div class="category-info">
            <div class="category-name">Electronics</div>
            <div class="category-bar">
              <div class="category-bar-fill" style="width:10%;background:var(--accent-green)"></div>
            </div>
            <div class="category-amount">1 receipt â€¢ 10%</div>
          </div>
          <div class="category-value">â‚¬60</div>
        </div>
        <div class="category-item">
          <div class="category-icon">ðŸ’Š</div>
          <div class="category-info">
            <div class="category-name">Healthcare</div>
            <div class="category-bar">
              <div class="category-bar-fill" style="width:5%;background:#f59e0b"></div>
            </div>
            <div class="category-amount">2 receipts â€¢ 5%</div>
          </div>
          <div class="category-value">â‚¬30</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Spending Analysis -->
  <div class="analysis-grid">
    <div class="analysis-card">
      <div class="chart-title" style="margin-bottom:20px">Top Merchants</div>
      <div class="analysis-item">
        <div class="analysis-label">REWE</div>
        <div class="analysis-value">â‚¬285</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">Lidl</div>
        <div class="analysis-value">â‚¬180</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">Aral</div>
        <div class="analysis-value">â‚¬90</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">MediaMarkt</div>
        <div class="analysis-value">â‚¬60</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">dm</div>
        <div class="analysis-value">â‚¬30</div>
      </div>
    </div>

    <div class="analysis-card">
      <div class="chart-title" style="margin-bottom:20px">Monthly Comparison</div>
      <div class="analysis-item">
        <div class="analysis-label">This Month</div>
        <div class="analysis-value" style="color:var(--accent-green)">â‚¬842</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">Last Month</div>
        <div class="analysis-value">â‚¬750</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">Difference</div>
        <div class="analysis-value" style="color:var(--accent-green)">+â‚¬92 (12%)</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">3-Month Avg</div>
        <div class="analysis-value">â‚¬796</div>
      </div>
      <div class="analysis-item">
        <div class="analysis-label">Projection</div>
        <div class="analysis-value">â‚¬920</div>
      </div>
    </div>
  </div>
</main>

<script>
const user=JSON.parse(localStorage.getItem('user')||'{}');
if(user.name)document.getElementById('navAvatar').textContent=user.name[0].toUpperCase();
document.getElementById('navBalance').textContent=(user.luvy_balance||124.70).toFixed(2);

// Spending Chart
const ctx=document.getElementById('spendingChart').getContext('2d');
new Chart(ctx,{
  type:'line',
  data:{
    labels:['Sep','Oct','Nov','Dec','Jan','Feb'],
    datasets:[{
      label:'Spending',
      data:[620,680,720,750,790,842],
      borderColor:'#8b5cf6',
      backgroundColor:'rgba(139,92,246,0.1)',
      tension:0.4,
      fill:true,
      borderWidth:2,
      pointRadius:4,
      pointBackgroundColor:'#8b5cf6'
    }]
  },
  options:{
    responsive:true,
    maintainAspectRatio:false,
    plugins:{
      legend:{display:false},
      tooltip:{
        backgroundColor:'#1a1f2e',
        titleColor:'#fff',
        bodyColor:'#b4bcd0',
        borderColor:'#2d3748',
        borderWidth:1,
        padding:12,
        displayColors:false,
        callbacks:{label:ctx=>'â‚¬'+ctx.parsed.y}
      }
    },
    scales:{
      y:{
        grid:{color:'#2d3748'},
        ticks:{color:'#8b93a7',callback:v=>'â‚¬'+v}
      },
      x:{
        grid:{display:false},
        ticks:{color:'#8b93a7'}
      }
    }
  }
});

function handleLogout(){
  if(confirm('Sign out?')){
    localStorage.clear();
    location.href='login.html';
  }
}
</script>
</body>
</html>
